<!DOCTYPE HTML>

<html>
  <head>
    <style>
      table, th, td {
        border:1px solid rgb(255, 255, 255);
      }
  </style>
    <meta charset="utf-8">
    <link href="home.css" rel="stylesheet">
      <!--Load the Google Chart API-->
      <!-- If you want to use Google Chart, you need to import this library -->
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
      <script type="text/javascript">
  
        // Load the Visualization API and the corechart package.
        google.charts.load('current', {'packages':['corechart']});
  
        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawChart);
  
        var chart;
        var data;
        var options;
        var num_human = 0;
        var num_vampire = 0;
        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.

        function calculateStats() {
          num_human = 0;
          num_vampire = 0;
          var tableRows = document.querySelectorAll("#entryTableBody tr");
          tableRows.forEach(function (row) {
            var isVampire = row.cells[6].innerText === "Yes";
            if (isVampire) {
              num_vampire++;
            } else {
              num_human++;
            }
          });
        }

        function drawChart() {
          calculateStats();
          
          data = new google.visualization.DataTable();
          data.addColumn('string', 'Element');
          data.addColumn('number', 'Number');
          data.addRows([
            ['Human', num_human],
            ['Vampire', num_vampire]
          ]);
  
          // Set chart options
          options = {'title':'How many vampires in the class?',
                         'width':400,
                         'height':300};
  
          // Instantiate and draw our chart, passing in some options.
          chart = new google.visualization.PieChart(document.getElementById('chart_div'));
          chart.draw(data, options);
        }
  
        
      </script>
  </head>
  <body>
    <div class="site-wrapper">

        <div class="site-wrapper-inner">
        
        <div class="cover-container">
        
        <div class="masthead clearfix">
        <div class="inner">
        <h3 class="masthead-brand">Vos</h3>
        <nav>
        <ul class="nav masthead-nav">
        <li><a href="menu.html">Menu</a></li>
        <li><a href="entry.html">New Entry</a></li>
        <li class = "active"><a href="database.html">Database</a></li>
        </ul>
        </nav>
        </div>
        <h1 class="cover-heading">Database</h1>
        <div class = "center">
          <div>
            <p>Current vampire percentage pie graph:</p>
            <!--Div that will hold the pie chart-->
            <div id="chart_div"></div>
          
            
          </div>
          
        </div>
        </div>

        </div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <table style="width:100%">
            <tr>
              <th>Name</th>
              <th>Shadow</th>
              <th>Garlic</th>
              <th>Complexion</th>
              <th>Accent</th>
              <th>Result</th>
              <th>Vampire?</th>
            </tr>
            <tbody id="entryTableBody"></tbody>
          </table>

          <script>
            var entries = JSON.parse(localStorage.getItem('entries')) || [];

            // Display entries in the table
            var tableBody = document.getElementById("entryTableBody");

            function addRow(entry) {
              var row = tableBody.insertRow();
              row.insertCell(0).innerText = entry.name;
              row.insertCell(1).innerText = entry.garlic;
              row.insertCell(2).innerText = entry.shadow;
              row.insertCell(3).innerText = entry.complexion;
              row.insertCell(4).innerText = entry.accent;
              row.insertCell(5).innerText = entry.score;
              row.insertCell(6).innerText = entry.score > 6 ? "Yes" : "No"; // Determine if vampire
            }

            entries.forEach(function(entry) {
              addRow(entry);
            });

          </script>
            
        
        <div class="inner cover">
        </p>
        </div>

        <div class="mastfoot">
        <div class="inner">
        </div>
        </div>
        
        </div>
        
        </div>
        
        </div>
    </body>
</html>